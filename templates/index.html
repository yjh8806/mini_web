<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!--    템플릿 적용 CSS / JS-->
    <link
            href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900"
            rel="stylesheet"
    />
    <!-- Additional CSS Files -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    {#    <link rel="stylesheet" href="{{ url_for('static', filename='css/flex-slider.css') }}">#}
    <!-- Webpage Title -->
    <title>Hello, world!</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>


    <style>
        .card-deck {
            width: 80%;
            margin: 30px 0px 0px 150px;
            display: block;
        }
        .card {
            width: 370px;
            height: 450px;
            float: left;
            min-width: 230px;
            /*margin-bottom: 10px!important;*/
            margin: 0px 10px 10px 0px !important;
        }

        .card-img-top {
            display: block;
            margin: auto;
            object-fit: cover;
            {#width: 100px;#}
            {#height: 100px;#}
        }

        .card-title {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }

        .card-country {
            color: red;
            font-weight: bold;
        }
    </style>

    <script>
        // 웹 실행 시 작동
        $(document).ready(function() {
            $('#card_list').html("")
            shoeslist()
        })
        // 로그아웃은 내가 가지고 있는 토큰만 쿠키에서 없애면 됩니다.
        function logout() {
            $.removeCookie('mytoken');
            alert('로그아웃!')
            window.location.href = '/login'
        }

        function shoeslist() {
            $.ajax({
                type: "GET",
                url: "/api/list",
                data: {},
                success: function (response) {
                    if (response['result'] == 'success') {
                        let lists = response['all_lists']
                        console.log(lists)
                        for(let i = 0; i < lists.length; i++) {
                            let shop = lists[i]['shop']
                            let shoe = lists[i]['shoe']
                            let country = lists[i]['country']

                            let temp_html = `<div class="card">
                                                <img class="card-img-top" src="static/images/common-5.jpeg" alt="Card image cap">
                                                <div class="card-body">
                                                    <h5 class="card-title">${shop}</h5>
                                                    <p class="card-text">${shoe}</p>
                                                    <p class="card-country">${country}</p>
                                                </div>
                                                <div class="card-footer">
                                                    <small class="text-muted">00:00:00초 후 종료</small>
                                                </div>
                                            </div>`
                            $('#card_list').append(temp_html)
                        }
                    }
                }
            })
        }

    </script>
</head>
<body>
    {#    <h5 class="subtitle">어서오세요! {{nickname}}님</h5>#}
    <div style="width: 100%; height: 100px; font-size: 50px; text-align: center; font-weight: bold;">
        Good NewShoe
    </div>
    <button style="float: right;" class="button is-danger" onclick="logout()">로그아웃하기</button>
    <hr style="border: 2px solid black"/>
    <div id="card_list" class="card-deck">
        <div class="card">
            <img class="card-img-top" src="static/images/common-5.jpeg" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional
                    content. This content is a little bit longer.</p>
            </div>
            <div class="card-footer">
                <small class="text-muted">00:00:00초 후 종료</small>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="static/images/common-5.jpeg" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
            </div>
            <div class="card-footer">
                <small class="text-muted">00:00:00초 후 종료</small>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="static/images/common-5.jpeg" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional
                    content. This card has even longer content than the first to show that equal height action.</p>
            </div>
            <div class="card-footer">
                <small class="text-muted">00:00:00초 후 종료</small>
            </div>
        </div>
    </div>
</body>
</html>